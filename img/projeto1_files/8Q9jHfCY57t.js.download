;/*FB_PKG_DELIM*/

__d("E2EELinkPreviewXMADataType",[],(function(t,n,r,o,a,i){var e=Object.freeze({FALLBACK:1,FB_CLIENT_FETCH:2,OEMBED:4});i.default=e}),66);
__d("IGDMessageContextMenuItem.react",["IGDSContextMenuItem.react","react","react-compiler-runtime"],(function(t,n,r,o,a,i,l){"use strict";var e,s=e||(e=o("react")),u={container:{paddingBottom:"xwib8y2",paddingInlineEnd:"xf159sx",paddingInlineStart:"xmzvs34",paddingTop:"x1y1aw1k",$$css:!0}};function c(e){var t=o("react-compiler-runtime").c(10),n=e.delimiter,r=e.icon,a=e.label,i=e.labelProps,l=e.onClick,c=e.onHoverIn,d=e.onHoverOut,m=e.onPressIn,p=e.testid,_;return t[0]!==n||t[1]!==r||t[2]!==a||t[3]!==i||t[4]!==l||t[5]!==c||t[6]!==d||t[7]!==m||t[8]!==p?(_=s.jsx(o("IGDSContextMenuItem.react").IGDSContextMenuItem,{addOnEnd:r,delimiter:n,onHoverIn:c,onHoverOut:d,onPress:l,onPressIn:m,testid:void 0,title:a,titleProps:i,xstyle:u.container}),t[0]=n,t[1]=r,t[2]=a,t[3]=i,t[4]=l,t[5]=c,t[6]=d,t[7]=m,t[8]=p,t[9]=_):_=t[9],_}l.default=c}),98);
__d("genArrayBufferFromFile",["Promise"],(function(t,n,r,o,a,i){"use strict";var e;function l(t){return"arrayBuffer"in t&&typeof t.arrayBuffer=="function"?t.arrayBuffer():new(e||(e=n("Promise")))(function(e,n){var r=new FileReader;r.onload=function(){var t=r.result;t instanceof ArrayBuffer?e(t):n()},r.onerror=function(){n(r.error)},r.readAsArrayBuffer(t)})}i.default=l}),66);
__d("genIsNonAnimatedWebPFile",["genArrayBufferFromFile"],(function(t,n,r,o,a,i,l){"use strict";var e=8;function s(e){return r("genArrayBufferFromFile")(e).then(function(e){var t=new Uint8Array(e),n=t.slice(12,16).reduce(function(e,t,n){return e+String.fromCharCode(t)},"");if(n==="VP8X"){var r=t[20],o=r.toString(2).padStart(8,"0");if(o[6]==="1")return!u(t)}return!0})}function u(t){for(var n=12,r=0;r<2&&n+e<t.length;){var o=c(t,n);o==="ANMF"&&r++;var a=d(t,n+4),i=a%2,l=e+a+i;n+=l}return r>1}function c(e,t){return e.slice(t,t+4).reduce(function(e,t,n){return e+String.fromCharCode(t)},"")}function d(e,t){return parseInt(e.slice(t,t+4).reduce(function(e,t,n){return t.toString(2).padStart(8,"0")+e},""),2)}l.default=s}),98);
__d("LSGetAttachmentType",["LSIntEnum","MessagingAttachmentType","asyncToGeneratorRuntime","cometIsMimeTypeForMedia","genIsNonAnimatedWebPFile"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(e){return u.apply(this,arguments)}function u(){return u=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){return t.type==="image/webp"?(e||(e=o("LSIntEnum"))).ofNumber((yield r("genIsNonAnimatedWebPFile")(t))?r("MessagingAttachmentType").IMAGE:r("MessagingAttachmentType").VIDEO):c(t)}),u.apply(this,arguments)}function c(t){var n=t.type;return o("cometIsMimeTypeForMedia").isMimeTypeForPhoto(n)?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE):n==="audio/wav"?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO):n==="image/gif"?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE):o("cometIsMimeTypeForMedia").isMimeTypeForVideo(n)?(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO):(e||(e=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE)}l.LSGetAttachmentType=s,l.LSGetAttachmentTypeSyncButLessAccurate=c}),98);
__d("LSMessageContentType",[],(function(t,n,r,o,a,i){var e=Object.freeze({TEXT:1,MEDIA_PREVIEW:2,AUDIO_CLIP:4,XMA_FALLBACK:8,LWA_WAVE:16,ADMIN:32,FILE_ATTACHMENT:64,GLYPH:128,TOMBSTONE:256,STORY_REPLY:512,SINGLE_XMA:1024,HSCROLL_XMA:2048,STICKER:4096,FORWARD_INDICATOR:8192,ANIMATED_IMAGE:16384,NULL_STATE:32768,ENCRYPTION_PLACEHOLDER:65536,FUTUREPROOF_PLACEHOLDER:131072,UNAVAILABLE_PLACEHOLDER:262144,LOCATION_PLACEHOLDER:524288,POLL_CREATION_PLACEHOLDER:1048576,CONTACT_SHARE_PLACEHOLDER:2097152,STORY_MENTION_PLACEHOLDER:4194304,META_AI_MESSAGE_PLACEHOLDER:8388608,BUMP_MESSAGE_PLACEHOLDER:16777216,BUMP_MESSAGE_ORIGINAL_UNAVAILABLE_PLACEHOLDER:33554432,STICKER_RECEIVER_FETCH_UNSUPPORTED_PLACEHOLDER:67108864,RECEIVER_FETCH:134217728,STORY_MENTION:268435456,XMA_RECEIVER_FETCH:536870912,NOTE_MENTION_PLACEHOLDER:1073741824,POST_MENTION_PLACEHOLDER:2147483648,LIVE_LOCATION_PLACEHOLDER:4294967296,MESSENGER_MEMORY_PLACEHOLDER:8589934592,RTC_XMA_PLACEHOLDER:17179869184});i.default=e}),66);
__d("LSPlatformWaitForTaskCompletion",["I64","Promise","asyncToGeneratorRuntime","emptyFunction","err","promiseDone","uuidv4"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=["acs_sync"];function c(e,t,n,r){return d.apply(this,arguments)}function d(){return d=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t,a,l,c){var d=new Set,m=[],p=0,_=!0,f,g,h=new(s||(s=n("Promise")))(function(e,t){f=e,g=t}),y=r("uuidv4")(),C=!0,b=yield t.runInTransaction((function(){var s=n("asyncToGeneratorRuntime").asyncToGenerator(function*(s){yield s.mailbox_task_completion_notification_context.add({notificationName:l,notificationScopeKey:y});var h=t.tables.pending_tasks.subscribe(function(t,n){var r=(e||(e=o("I64"))).to_string(t[0]);if(n.operation==="add"||n.operation==="put"){var a=n.value;if(u.some(function(e){return a.queueName.startsWith(e)})||c!=null&&a.queueName!==c)return;d.add(r)}else d.delete(r)}),v=r("emptyFunction"),S=t.tables.mailbox_task_completion_api_tasks.subscribe(function(t,n){if(n.operation==="add"||n.operation==="put"&&n.value.notificationScopeKey===y){var r=(e||(e=o("I64"))).to_string(n.value.taskId);d.delete(r);var a=n.value.success;a==null?C&&(m.push(r),p+=1):(_=a&&_,p-=1)}});v=t.subscribeToCommit(function(){p===0&&d.size===0&&(S(),h(),v(),r("promiseDone")(t.runInTransaction((function(){var t=n("asyncToGeneratorRuntime").asyncToGenerator(function*(t){for(var n of m)yield t.mailbox_task_completion_api_tasks.delete((e||(e=o("I64"))).of_string(n))});return function(e){return t.apply(this,arguments)}})(),"readwrite","background",void 0,i.id+":144")),_?f(b):g(r("err")("Not all tasks for "+l+" succeeded")))});try{var R=yield a(s);return yield s.mailbox_task_completion_notification_context.delete(y),R}catch(e){throw v(),S(),h(),e}});return function(e){return s.apply(this,arguments)}})(),"readwrite",void 0,void 0,i.id+":65");return C=!1,h}),d.apply(this,arguments)}l.default=c}),98);
__d("MWLSThread",["FBLogger","Promise","ReQL","ReQLSuspense","useReStore"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=function(t){return t};function c(e,t){t===void 0&&(t=u);var n=(s||(s=r("useReStore")))();return o("ReQLSuspense").useFirst(function(){return e!=null?o("ReQL").fromTableAscending(n.tables.threads).getKeyRange(e).map(function(e){return t(e)}):o("ReQL").empty()},[n,e],i.id+":29")}function d(e,t){t===void 0&&(t=u);var n=(s||(s=r("useReStore")))();return o("ReQLSuspense").useFirstExn(function(){return o("ReQL").fromTableAscending(n.tables.threads).getKeyRange(e).map(function(e){var n;return(n=t==null?void 0:t(e))!=null?n:e})},[n,e],i.id+":48")}function m(e,t,n){n===void 0&&(n=u);var a=o("ReQLSuspense").first(o("ReQL").fromTableAscending(e.tables.threads).getKeyRange(t),i.id+":65");if(!a)throw r("FBLogger")("messenger_web").mustfixThrow("thread is null/undefined");return n(a)}function p(t,r,a){return a===void 0&&(a=u),r!=null?o("ReQL").firstAsync(o("ReQL").fromTableAscending(t.tables.threads).getKeyRange(r)).then(function(e){return e?a(e):void 0}):(e||(e=n("Promise"))).resolve(void 0)}l.useThread=c,l.useThreadExn=d,l.getThreadExn=m,l.getThreadAsync=p}),98);
__d("MWMediaRenderQplUtils",["CurrentUser","E2EELinkPreviewXMADataType","I64","LSBitFlag","LSIntEnum","LSMessageContentType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessagingInitiatingSource","LSReplyMessageAttachmentType","LSXmaContentType","MAWLoggerUtils","MNLSXMALayoutType","MessagingAttachmentType","MessagingThreadType","QPLUserFlow","ServerTime","VisibilityAPI","VisibilityState","justknobx","mergeDeep","objectEntries","performanceAbsoluteNow","qpl","react","setTimeout"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u,c,d=s||(s=o("react")),m=d.useEffect,p=d.useLayoutEffect,_=d.useMemo,f=d.useRef,g=3600*24,h=3*g,y=7*g,C=2*y,b=4*y,v=r("qpl")._(25302828,"2195"),S=r("justknobx")._("2945"),R=1e3,L=r("objectEntries")(r("LSMessageContentType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map),E=r("objectEntries")(r("LSReplyMessageAttachmentType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function k(e){return I(e.displayedContentTypes)}function I(e){var t;if(o("LSBitFlag").has((u||(u=o("LSIntEnum"))).ofNumber(1024),e)){var n;return(n=L.get(1024))!=null?n:"UNKNOWN"}return(t=L.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}function T(e){var t;return e==null?"UNKNOWN":(t=E.get((c||(c=o("I64"))).to_int32(e)))!=null?t:"UNKNOWN"}function D(e){var t;if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").ANIMATED_IMAGE)))t=(u||(u=o("LSIntEnum"))).ofNumber(16384);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").IMAGE)))t=(u||(u=o("LSIntEnum"))).ofNumber(2);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").VIDEO)))t=(u||(u=o("LSIntEnum"))).ofNumber(2);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").AUDIO)))t=(u||(u=o("LSIntEnum"))).ofNumber(4);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE)))t=(u||(u=o("LSIntEnum"))).ofNumber(64);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").STICKER)))t=(u||(u=o("LSIntEnum"))).ofNumber(4096);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").FILE)))t=(u||(u=o("LSIntEnum"))).ofNumber(64);else if((c||(c=o("I64"))).equal(e,(u||(u=o("LSIntEnum"))).ofNumber(r("MessagingAttachmentType").XMA)))t=(u||(u=o("LSIntEnum"))).ofNumber(1024);else return"UNKNOWN";return I(t)}var x=r("objectEntries")(r("MessagingAttachmentType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function $(e){return P(e.attachmentType)}function P(e){var t;return(t=x.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var N=r("objectEntries")(r("MessagingThreadType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function M(e){var t=e.threadType;return w(t)}function w(e){var t;return(t=N.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var A=r("objectEntries")(r("LSXmaContentType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function F(e){var t;return(t=A.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var O=r("objectEntries")(r("LSMessagingInitiatingSource")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function B(e){var t;return e!=null&&(t=O.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var W=r("objectEntries")(r("E2EELinkPreviewXMADataType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function q(e){var t;return(t=W.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var U=r("objectEntries")(r("LSMessageReplySourceType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function V(e){var t;return(t=U.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var H=r("objectEntries")(r("MNLSXMALayoutType")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function G(e){var t;return e==null?"UNKNOWN":(t=H.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}var z=r("objectEntries")(r("LSMessageReplySourceTypeV2")).reduce(function(e,t){var n=t[0],r=t[1];return e.set(r,n),e},new Map);function j(e){var t;return(t=z.get((c||(c=o("I64"))).to_float(e)))!=null?t:"UNKNOWN"}function K(t,n,a,i){var l=(e||(e=r("performanceAbsoluteNow")))(),s=function(o,a){r("QPLUserFlow").addPoint(t,"window_visibility_change_"+(a?"hidden":"visible"),{instanceKey:n}),a&&r("QPLUserFlow").addAnnotations(t,{bool:{window_was_hidden:!0}},{instanceKey:n})},u=function(t){var e=o("VisibilityAPI").canUseVisibilityAPI?o("VisibilityAPI").isVisibilityHidden():void 0,n={bool:{window_is_hidden_on_end:e}};return t!=null?r("mergeDeep")(t,n):n};return{addAnnotations:function(o){r("QPLUserFlow").addAnnotations(t,o,{instanceKey:n})},addPoint:function(o,a){r("QPLUserFlow").addPoint(t,o,{data:a,instanceKey:n})},endCancel:function(l){a!=null&&(a.current=!0);var i=(e||(e=r("performanceAbsoluteNow")))(),c=u();o("VisibilityState").unsubscribe(s),r("setTimeout")(function(){r("QPLUserFlow").endCancel(t,{annotations:c,cancelReason:l,instanceKey:n,timestamp:i})},R)},endFail:function(l,c){a!=null&&(a.current=!0);var i=(e||(e=r("performanceAbsoluteNow")))(),d=r("mergeDeep")(u(c),{string:{fail_reason:l}});o("VisibilityState").unsubscribe(s),r("setTimeout")(function(){r("QPLUserFlow").endFailure(t,"render-failure",{annotations:d,instanceKey:n,timestamp:i})},R)},endSuccess:function(l,c){a!=null&&(a.current=!0);var i=c!=null?c:(e||(e=r("performanceAbsoluteNow")))(),d=u(l);o("VisibilityState").unsubscribe(s),r("setTimeout")(function(){r("QPLUserFlow").endSuccess(t,{annotations:d,instanceKey:n,timestamp:i})},R)},getInstanceKey:function(){return n},start:function(u){var a=l,c=i!=null?i:{};if(u!=null&&u.isManualRetry===!0){var d;a=(e||(e=r("performanceAbsoluteNow")))(),c=r("mergeDeep")(c,{bool:{is_manual_retry:!0},int:{manual_retry_count:((d=u.manualRetryCount)!=null?d:0)+1},string:{previousManualRetryErrorDetails:u.previousManualRetryErrorDetails}})}r("QPLUserFlow").start(t,{annotations:c,cancelOnUnload:!0,instanceKey:n,timeoutInMs:S,timestamp:a}),o("VisibilityState").subscribe(s)}}}function Q(e,t,n){var a=e.attachmentType,i=f(!1),l=_(function(){var l=o("MAWLoggerUtils").getInstanceKey(),s=r("CurrentUser").getAppID(),u={string:{app_id:s!=null?s:void 0,attachment_type:P(a),content_type:D(a),entry_point:n,thread_type:w(t),transport_key:e.transportKey,xma_content_type:e.xmaContentType!=null?F(e.xmaContentType):void 0}};return babelHelpers.extends({},K(v,l,i,u))},[e.messageId]);return p(function(){l==null||l.start()},[l]),m(function(){return function(){i.current===!1&&(l==null?void 0:l.getInstanceKey())!=null&&(l==null||l.endCancel(706))}},[l]),l}function X(e,t,n){var r=e+(t?"0":"1")+(n?"1":"0");return o("MAWLoggerUtils").getInstanceKeyFromId(r)}function Y(e){var t=(c||(c=o("I64"))).of_float(o("ServerTime").getMillis()),n=c.to_float(c.sub(t,e))/1e3,r;return n<g?r="less_than_one_day":n<h?r="between_one_and_three_days":n<y?r="between_three_days_and_one_week":n<C?r="between_one_and_two_weeks":n<b?r="between_two_weeks_and_one_month":r="more_than_one_month",r}function J(e){return e==null||e<=0?"invalid_duration":e<=30?"duration less than 30 seconds":e<=60?"duration between 30 seconds and 1 minute":e<=120?"duration between 1 minute and 2 minutes":e<=180?"duration between 2 minutes and 3 minutes":e<=300?"duration between 3 minutes and 5 minutes":e<=600?"duration between 5 minutes and 10 minutes":e<=1800?"duration between 10 minutes and 30 minutes":e<=3600?"duration between 30 minutes and 1 hour":e<=7200?"duration between 1 hour and 2 hours":"duration above 2 hours"}l.MSGR_WEB_MEDIA_RENDER_EVENT=v,l.QPL_TIMEOUT=S,l.QPL_END_DELAY_MS=R,l.getMessageContentTypeString=k,l.getMessageContentTypeStringFromEnum=I,l.getReplyMessageAttachmentTypeStringFromEnum=T,l.deriveMessageContentTypeStringFromAttachmentTypeLessAccurate=D,l.getAttachmentTypeString=$,l.getAttachmentTypeStringFromEnum=P,l.getThreadTypeString=M,l.getThreadTypeStringFromEnum=w,l.getXmaContentTypeStringFromEnum=F,l.getMessagingInitiationSourceStringFromEnum=B,l.getE2EELinkPreviewXMADataTypeStringFromEnum=q,l.getMessageReplySourceTypeStringFromEnum=V,l.getMessageXmaLayoutTypeStringFromEnum=G,l.getMessageReplySourceTypeV2StringFromEnum=j,l.createQplFlowCommon=K,l.useCommonMediaRenderQplForAttachment=Q,l.getThreadViewMediaRenderQplInstanceKey=X,l.calculateDiffBucketFromTimestamp=Y,l.convertDurationToStringBucket=J}),98);
__d("MWPReplyContext.react",["I64","emptyFunction","react","requireDeferred"],(function(t,n,r,o,a,i,l){"use strict";var e,s,u=e||(e=o("react")),c=e,d=c.createContext,m=c.useCallback,p=c.useMemo,_=c.useState,f=r("requireDeferred")("MWPReplyLogging").__setRef("MWPReplyContext.react"),g=d({clearReply:r("emptyFunction"),reply:void 0,setReply:r("emptyFunction")});function h(e){try{return JSON.parse(e)}catch(e){return}}function y(e){var t=e.children,n=e.clearThreadReply,r=e.getRepliesState,a=e.persistRepliesState,i=e.senderId,l=e.threadKey,c=r!=null&&l!=null?h(r((s||(s=o("I64"))).to_string(l))):void 0,d=_(c),y=d[0],C=d[1],b=m(function(e,t){if(f.onReady(function(n){n.logClearReply(t,e,y!=null)}),C(),n!=null)return n((s||(s=o("I64"))).to_string(e))},[n,y]),v=m(function(e,t){if(f.onReady(function(n){n.logSetReply(y,e,t)}),C(e),a!=null)return a({messageId:e.messageId,offlineThreadingId:e.offlineThreadingId,senderId:i,sendStatusV2:e.sendStatusV2,threadKey:(s||(s=o("I64"))).to_string(t),timestampMs:e.timestampMs})},[a,y,i]),S=p(function(){return{clearReply:b,reply:y,setReply:v}},[y,v,b]);return u.jsx(g.Provider,{value:S,children:t})}y.displayName=y.name+" [from "+i.id+"]",l.MWPReplyContext=g,l.MWPReplyContextProvider=y}),98);
__d("ReQLSubscribe",["ErrorGuard","ReQL","promiseDone"],(function(t,n,r,o,a,i,l){"use strict";var e;function s(t,n){var a=t.take(1),i=(e||(e=r("ErrorGuard"))).guard(n),l=!1,s=null,u=a.subscribe(function(e,t){var n;if(!l)switch(t.operation){case"delete":(s==null||s.current!==void 0)&&(s={current:void 0},i(s.current));return;case"add":case"put":((n=s)==null?void 0:n.current)!==t.value&&(s={current:t.value},i(s.current))}});return r("promiseDone")(o("ReQL").firstAsync(a),function(e){!l&&s==null&&(s={current:e},i(e))}),function(){l||(l=!0,u==null||u())}}l.subscribeToFirst=s}),98);
__d("isThreadLevelCutoverEnabled",["qex"],(function(t,n,r,o,a,i,l){"use strict";function e(){return r("qex")._("564")===!0}l.default=e}),98);